<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.12">
<title>Localization and Internationalization</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1>Localization and Internationalization</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Вопрос интернационализации пользовательского интерфейса - один из важных вопросов при разработке приложения. Для этого недостаточно использовать Unicode и перевести на нужный язык все сообщения пользовательского интерфейса. Интернационализация приложения означает нечто большее, чем поддержка Unicode. Дата, время, денежные суммы и даже числа могут по-разному представляться на различных языках.</p>
</div>
<div class="paragraph">
<p>Широкое распространение получили условные сокращения терминов <strong>интернационализации</strong> и <strong>локализации</strong> приложений <strong>i18n</strong> и <strong>l10n</strong>, в которых, цифра означает количество символов между первой и последней позицией:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>l10n</strong> - <strong>локализация</strong> (<strong>localization</strong>).</p>
</li>
<li>
<p><strong>i18n</strong> - <strong>интернационализация</strong> (<strong>internationalization</strong>);</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>В отдельной литературе делают акцент на этих двух определениях, под которыми понимается:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Интернационализация</strong> - это процесс разработки приложения такой структуры, при которой дополнение нового языка не требует перестройки и компиляции (сборки) всего приложения.</p>
</li>
<li>
<p><strong>Локализация</strong> предполагает адаптацию интерфейса приложения под несколько языков. Добавление нового языка может внести определенные сложности в локализацию интерфейса.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Java</strong> - первый язык программирования, в котором изначально были предусмотрены средства интернационализации. Строки формируются из символов <em>Unicode</em>. Поддержка этого стандарта кодирования позволяет создавать Java-приложения, обрабатывающие тексты на любом из существующих в мире языков.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_региональные_стандарты_locale">Региональные стандарты Locale</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Приложение, которое адаптировано для международного рынка, легко определить по возможности выбора языка, для работы с ним. Но профессионально адаптированные приложения могут иметь разные региональные настройки даже для тех стран, в которых используется одинаковый язык. В любом случае команды меню, надписи на кнопках и программные сообщения должны быть переведены на местный язык, возможно с использованием специального национального алфавита. Но существует еще много других более тонких различий, которые касаются:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>форматов представления вещественных чисел (разделители целой и дробной частей, разделителей групп тысяч)</p>
</li>
<li>
<p>денежных сумм (включение и местоположения денежного знака)</p>
</li>
<li>
<p>формата даты (порядок следования и символы разделители дней, месяцев и лет)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Существует ряд классов, которые выполняют форматирование, принимая во внимание указанные выше различия. Для управления форматированием используется класс <code>Locale</code>.</p>
</div>
<div class="paragraph">
<p>Региональный стандарт <code>Locale</code> определяет язык. Кроме этого могут быть указаны географическое расположение и вариант языка. Например, в <em>США</em> используется следующий региональный стандарт:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>language=English, location=United States</pre>
</div>
</div>
<div class="paragraph">
<p>В Германии региональный стандарт имеет вид:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>language=German, location=Germany</pre>
</div>
</div>
<div class="paragraph">
<p>В Швейцарии используются четыре официальных языка:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>немецкий</p>
</li>
<li>
<p>французский</p>
</li>
<li>
<p>итальянский</p>
</li>
<li>
<p>ретороманский</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Поэтому немецкие пользователи в Швейцарии, вероятно, захотят использовать следующий региональный стандарт:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>language=German, location=Switzerland</pre>
</div>
</div>
<div class="paragraph">
<p>В данном случае текст, даты и числа будут форматироваться так же, как и для Германии, но денежные суммы будут отображаться в швейцарских франках, а не в евро. Если задавать только язык, например <code>language=German</code>, то особенности конкретной страны (например, формат представления денежных единиц) не будут учтены.</p>
</div>
<div class="paragraph">
<p>Вариант языка используется довольно редко. Например, в настоящее время в норвежском языке (производном от датского) определены два набора правил правописания</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Bokmel</strong></p>
</li>
<li>
<p>новый <strong>Nynorsk</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>В этом случае, для задания традиционных правил орфографии используется параметр, определяющий вариант:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>language=Norwegian, location=Norway, variant=Bokmel</pre>
</div>
</div>
<div class="paragraph">
<p>Для выражения языка и расположения в компактной и стандартной форме в Java используются коды, определенные <strong>Международной организацией по стандартизации</strong> (<strong>ISO</strong>). Язык обозначается двумя строчными буквами в соответствии со стандартом <strong>ISO-639</strong>, а страна(расположение) — двумя прописными буквами согласно стандарту <strong>ISO-3166</strong>.</p>
</div>
<div class="paragraph">
<p>Чтобы задать региональный стандарт, необходимо объединить код языка, код страны и вариант (если он есть), а затем передать полученную строку в конструктор класса Locale.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Locale german = new Locale("de");
Locale germanGermany = new Locale("de", "DE");
Locale germanSwitzerland = new Locale("de", "CH");
Locale norwegianNorwayBokmel = new Locale("no", "NO", "B");</code></pre>
</div>
</div>
<div class="paragraph">
<p>Для удобства пользователей в <strong>JDK</strong> предусмотрено несколько предопределенных объектов с региональными настройками, а для некоторых языков также имеются объекты, позволяющие указать язык без указания страны:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Предопределенные объекты с региональными установками</th>
<th class="tableblock halign-left valign-top">Объекты, позволяющие указать язык без указания страны</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Locale.CHINA</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Locale.CHINESE</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Locale.FRANCE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Locale.FRENCH</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Locale.GERMANY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Locale.GERMAN</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Locale.ITALY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Locale.ITALIAN</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Locale.JAPAN</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Locale.JAPANESE</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Locale.US</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Locale.ENGLISH</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Помимо вызова конструктора или выбора предопределенных объектов, существует еще два пути получения объектов с региональными настройками. Статический метод <code>getDefault()</code> класса <code>Locale</code> позволяет определить региональную настройку, которая используется в операционной системе по-умолчанию. Изменить настройку по-умолчанию можно вызвав метод <code>setDefault()</code>. Однако следует помнить, что данный метод воздействует только на Java-программу, а не на операционную систему в целом.</p>
</div>
<div class="sect2">
<h3 id="_региональные_настройки_getavailablelocales">Региональные настройки, <code>getAvailableLocales()</code></h3>
<div class="paragraph">
<p>Метод <code>getLocale()</code> возвращает региональные настройки того компьютера, на котором он запущен. И наконец, все зависимые от региональных настроек вспомогательные классы могут возвращать массив поддерживаемых региональных стандартов. Например, приведенный ниже метод возвращает все региональные настройки, поддерживаемые классом <code>DateFormat</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Locale [] supportedLocales = DateFormat.getAvailableLocales();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Какие действия можно выполнять на основе полученных региональных настроек? Выбор невелик. Единственными полезными методами класса Locale являются методы определения кодов языка и страны. Наиболее важными из них является метод <code>getDisplayName()</code>, возвращающий строку с описанием региональной настройки, которая содержит не какие-то двух-буквенные загадочные коды, а вполне понятные пользователю обозначения</p>
</div>
<div class="listingblock">
<div class="content">
<pre>German(Switzerland)</pre>
</div>
</div>
<div class="paragraph">
<p>Но данная строка отображается на используемом по умолчанию языке, что далеко не всегда бывает удобно. Если пользователь выбрал немецкий язык интерфейса, то строку описания следует отобразить именно на немецком языке, для чего можно передать в качестве параметра соответствующую региональную настройку так, как представлено в следующих строках кода:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Locale loc = new Locale("de", "CH");
System.out.println (loc.getDisplayName(Locale.GERMAN));</code></pre>
</div>
</div>
<div class="paragraph">
<p>В результате выполнения этого кода описание региональной настройки будет выведено на указанном в ней языке:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Deutsch(Schweiz)</pre>
</div>
</div>
<div class="paragraph">
<p>Данный пример поясняет, зачем нужны объекты <code>Locale</code>. Передавая их методам, способным реагировать на региональные настройки, можно отображать текст на языке, понятном пользователю.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_форматирование_числовых_значений_numberformat">Форматирование числовых значений NumberFormat</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Ранее упоминалось, что в разных странах и регионах используются различные способы представления чисел и денежных сумм. В пакете <code>java.text</code> содержатся классы, позволяющие форматировать числа и выполнять разбор их строкового представления. Для форматирования чисел в соответствии с конкретным региональным стандартом необходимо выполнить ряд действий:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Получить объект регионального стандарта, как было описано в предыдущем разделе.</p>
</li>
<li>
<p>Использовать фабричный метод для получения объекта форматирования.</p>
</li>
<li>
<p>Применить полученный объект форматирования для формирования числа или разбора его строкового представления.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>В качестве <strong>фабричных методов</strong> (<strong>factory method</strong>) используются статические методы <code>getNumberInstance()</code>, <code>getCurrencyInstance()</code>, <code>getPercentInstance()</code> класса <code>NumberFormat</code>. Они получают в качестве параметра объект <code>Locale</code> и возвращают объекты, предназначенные для форматирования чисел, денежных сумм и значений, выраженных в процентах. Например, для отображения денежной суммы в формате, принятом в Германии, можно использовать приведенный ниже фрагмент кода:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Locale loc = new Locale("de", "DE");
NumberFormat currFmt;
currFmt = NumberFormat.getCurrencyInstance(loc);
double amt = 123456.78;
System.out.println (currFmt.format(amt));</code></pre>
</div>
</div>
<div class="paragraph">
<p>В результате выполнения этого кода будет получена следующая строка:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>123.456,78€</pre>
</div>
</div>
<div class="paragraph">
<p>Для обозначения евро здесь используется знак <code>€</code>, который располагается в конце строки. Кроме этого, следует обратить внимание на символы, применяемые для обозначения дробной части и разделения десятичных разрядов.</p>
</div>
<div class="paragraph">
<p>Для преобразования строки, записанной в соответствии с определенным региональным стандартом, в число предусмотрен метод <code>parse()</code>, который выполняет синтаксический анализ строки с автоматическим использованием заданного по умолчанию регионального стандарта. В приведенном ниже примере показан способ преобразования строки, введенной пользователем в поле редактирования, в число. Метод <code>parse()</code> способен преобразовывать числа, в которых в качестве разделителя используется точка и запятая.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">TextField inputField;
// ...
NumberFormat fmt = NumberFormat.getNumberInstance();
// Получить объект форматирования для используемого по умолчанию регионального стандарта
Number input = fmt.parse(inputField.getText().trim());
double x = input.doubleValue();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Метод <code>parse()</code> возвращает результат абстрактного типа <code>Number</code>. На самом деле возвращаемый объект является экземпляром класса <code>Long</code> или <code>Double</code>, в зависимости от того, представляет исходная строка целое число или число с плавающей точкой. Если это не важно, то для получения числового значения достаточно использовать метод <code>doubleValue()</code> класса <code>Number</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Для объектов типа <code>Number</code> не поддерживается автоматическое приведение к простым типам.
Необходимо явным образом вызывать метод <code>doubleValue()</code> или <code>intValue()</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Если число представлено в некорректном формате, генерируется исключение <code>ParseException</code>. Например, не допускается наличие символа пробела в начале строки, преобразуемой в число (для их удаления следует использовать метод <code>trim()</code>). Любые символы, которые располагаются в строке после числа, лишь игнорируются и исключение в этом случае не возникает.</p>
</div>
<div class="paragraph">
<p>Очевидно, что классы, возвращаемые методами <code>get***Instance()</code>, являются экземплярами не абстрактного класса <code>NumberFormat</code>, а одного из его подклассов. Фабричным методам известно лишь то, как найти объект, представляющий определенный региональный стандарт.</p>
</div>
<div class="paragraph">
<p>Для получения списка поддерживаемых региональных стандартов можно использовать статистический метод <code>getAvailableLocales()</code>, возвращающий массив региональных стандартов, для которых существуют объекты форматирования.</p>
</div>
<div class="sect2">
<h3 id="_методы_пакета_java_text_numberformat">Методы пакета <code>java.text.NumberFormat</code></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Метод</th>
<th class="tableblock halign-left valign-top">Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>static Locale[] getAvailableLocales()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Возвращает массив объектов <code>Locale</code>, для которых доступны объекты форматирования</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>static NumberFormat getNumberFormatInstance()</code></p></td>
<td class="tableblock halign-left valign-top" rowspan="6"><p class="tableblock">Возвращает объект форматирования чисел, денежных сумм или величин, представленных в процентах, для текущего или заданного регионального стандарта</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>static NumberFormat getNumberFormatInstance(Locale l)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>static NumberFormat getNumberCurrency()</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>static NumberFormat getNumberCurrencyInstance(Locale l)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>static NumberFormat getNumberPercent()</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>static NumberFormat getNumberPercentInstance(Locale l)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String format(double x)</code></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Возвращает строку, полученную в результате форматирования заданного числа с плавающей точкой или целого числа.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String format(long x)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number parse(String s)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Возвращает число, полученное после преобразования строки. Это число может иметь тип <code>Long</code> или <code>Double</code>. Строка не должна начинаться с пробелов. Любые символы в строке после числа игнорируются. Если преобразование закончилось неудачей, то метод генерирует исключение <code>ParseException</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>void setParseIntegerOnly(boolean b)</code></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Устанавливает или возвращает признак того, что данный объект форматирования предназначен для преобразования только целочисленных значений.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean isParseIntegerOnly()</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>void setGroupingUsed(boolean b)</code></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Устанавливает или возвращает флаг, указывающий на то, что данный объект форматирования распознает символы разделения групп десятичных разрядов (например, <code>100</code>, <code>000</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean isGroupingUsed()</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>void setMinimumIntegerDigits(int n)</code></p></td>
<td class="tableblock halign-left valign-top" rowspan="8"><p class="tableblock">Устанавливает или возвращает максимальное либо минимальное количество цифр в целой или дробной части числа</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>void setMaximumIntegerDigits(int n)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>void setMinimumFractionDigits(int n)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>void setMaximumFractionDigits(int n)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int getMinimumIntegerDigits()</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int getMaximumIntegerDigits()</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int getMinimumFractionDigits()</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int getMaximumFractionDigits()</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_денежные_суммы">Денежные суммы</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Для форматирования денежных сумм используется метод <code>getCurrencyInstance()</code> класса <code>NumberFormat</code>. Однако этот метод не обеспечивает достаточной гибкости — он возвращает форматированную строку для одной валюты. Допустим, Вы выписываете счет для иностранного потребителя, в котором одни суммы представлены в долларах, а другие в евро. Использование двух приведенных ниже объектов форматирования не является решением задачи.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">NumberFormat dollarFormatter = NumberFormat.getCurrencyInstance(Locale.US);
NumberFormat euroFormatter = NumberFormat.getCurrencyInstance(Locale.GERMANY);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Счет, содержащий такие значения, как <code>$100,000</code> и <code>100.000€</code>, будет выглядеть достаточно странно, поскольку символы разделителей групп разрядов отличаются.</p>
</div>
<div class="paragraph">
<p>Для управления форматированием денежных сумм следует использовать класс <code>Currency</code>. Для получения объекта Currency необходимо передать статическому методу <code>Currency.getInstance()</code> идентификатор валюты. Затем необходимо вызвать метод <code>setCurrency()</code> каждого объекта форматирования. Ниже показано, как настроить объект форматирования евро для американского потребителя.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">NumberFormat euroFormatter = NumberFormat.getCurrencyInstance(Locale.US);
euroFormatter.setCurrency(Currency.getInstance("EUR"));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Идентификаторы валют определены стандартом <strong>ISO 4217</strong>. Некоторые из них приведены в таблице.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Наименование валюты</th>
<th class="tableblock halign-left valign-top">Обозначение</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Белоруский рубль</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>BYR</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Доллар США</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>USD</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Евро</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EUR</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Английский фунт</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>GBR</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Японская йена</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>JPY</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Индийская рупия</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>INR</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Российский рубль</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>RUB</strong></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_методы_пакета_java_util_currency">Методы пакета java.util.Currency</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Метод</th>
<th class="tableblock halign-left valign-top">Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>static Currency getInstance(String currencyCode)</code></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Возвращает экземпляр класса <code>Currency</code>, соответствующий заданному коду <strong>ISO 4217</strong> или стране, указанной посредством объекта <code>Locale</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>static Currency getInstance(Locale locale)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String toString()</code></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Возвращает код <strong>ISO 4217</strong> для данной валюты</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String getCurrencyCode()</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String getSymbol()</code></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Возвращает символ, обозначающий данную валюту в соответствии или заданными региональными настройками. Например, в зависимости от объекта <code>Locale</code>, доллар США (USD) может обозначаться как <code>$</code> или <code>US$</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String getSymbol(Locale locale)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int getDefaultFractionDigits()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Возвращает число цифр в дробной части для данной валюты, принятое по умолчанию</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_форматирование_даты_и_времени_dateformat">Форматирование даты и времени DateFormat</h2>
<div class="sectionbody">
<div class="paragraph">
<p>При форматировании даты и времени в соответствии с региональными стандартами следует иметь в виду четыре особенности:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>названия месяцев и дней недели должны быть представлены на местном языке;</p>
</li>
<li>
<p>последовательность указания года, месяца и числа различаются для разных стран и регионов;</p>
</li>
<li>
<p>для отображения дат можно использовать календарь, отличный от григорианского;</p>
</li>
<li>
<p>следует учитывать часовые пояса.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Для учета перечисленных возможностей в Java имеется класс <code>DateFormat</code>, который используется почти также, как и класс <code>NumberFormat</code>. В первую очередь следует сформировать объект регионального стандарта. Для получения массива региональных стандартов, поддерживающих формат даты, можно использовать предлагаемый по умолчанию статический метод <code>getAvailableLocales()</code>. Далее необходимо вызвать один из трех фабричных методов:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">fmt = DateFormat.getDateInstance(dateStyle, loc);
fmt = DateFormat.getTimeInstance(timeStyle, loc);
fmt = DateFormat.getDateTimeInstance(dateStyle, timeStyle, loc);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Для указания нужного стиля предусмотрен параметр, в качестве которого задается одна из следующих констант:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">DateFormat.DEFAULT;
DateFormat.FULL; // `Wednesday, Septemer 15 2004, 8:15:03 pm` для регионального стандарта США
DateFormat.LONG; // `Septemer 15, 2004 8:15:03 pm` для регионального стандарта США
DateFormat.MEDIUM; // `Sep 15, 2004 8:15:03 pm` для регионального стандарта США
DateFormat.SHORT; // `9/15/04 8:15 pm` для регионального стандарта США</code></pre>
</div>
</div>
<div class="paragraph">
<p>Представленные выше фабричные методы возвращают объект, который можно использовать для форматирования даты.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Date date = new Date();
String s = fmt.format(date);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Для преобразования строки в дату используется метод <code>parse()</code>, который работает аналогично одноименному методу класса <code>NumberFormat</code>. Например, приведенный ниже код преобразует строку, введенную пользователем в поле редактирования; при этом учитываются региональный настройки по умолчанию:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">TextField inputField;
// ...
DateFormat fmt;
fmt = DateFormat.getDateInstance(DateFormat.MEDIUM);
Date input = fmt.parse(inputField.getText().trim());</code></pre>
</div>
</div>
<div class="paragraph">
<p>В случае некорректного ввода даты попытка преобразования приведет к генерации исключения <code>ParseException</code>. Следует отметить, что в начале строки, подлежащей преобразованию в дату также не допускаются пробелы. Для их удаления следует вызвать метод <code>trim()</code>. Любые символы, которые располагаются после даты, игнорируются. К сожалению, пользователь должен вводить дату в конкретном формате. Например, если установлен тип представления даты <code>MEDIUM</code> в региональном стандарте США, то предполагается, что введенная строка должна иметь вид <code>Sep 18, 1997</code>. Но если пользователь введет строку <code>Sep 18 1997</code> (без запятой) или <code>9/18/97</code> (в кратком формате), то это приведет к ошибке преобразования.</p>
</div>
<div class="paragraph">
<p>Для интерпретации неточно указанных дат предусмотрен флаг <code>lenient</code>. Если данный флаг установлен, то неверно заданная дата <code>February 30, 1999</code> будет автоматически преобразована в дату <code>March 2, 1999</code>. Такое поведение вряд ли можно считать безопасным, поэтому данный флаг следует отключить. В этом случае, при попытке пользователя ввести некорректное сочетание дня, месяца и года во время преобразования строки в дату будет сгенерировано исключение <code>IllegalArgumentException</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_пакеты_ресурсов_resources">Пакеты ресурсов resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>При локализации приложений необходимо переводить огромное количество сообщений, надписей интерфейса и т.п. Для упрощения задачи рекомендуется собрать все локализуемые строки в отдельном месте, которое называется <strong>ресурсом</strong> (<strong>resource</strong>). В этом случае достаточно отредактировать файлы ресурсов, не трогая исходный код программы.</p>
</div>
<div class="paragraph">
<p>В Java для определения строковых ресурсов используются файлы свойств, а для ресурсов других типов создаются классы ресурсов.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Технология использования ресурсов в Java отличается от технологии использования ресурсов в операционных системах <em>Windows</em> и <em>Macintosh</em>. В выполняемой программе системы <em>Windows</em> такие ресурсы, как меню, диалоговые окна, пиктограммы и сообщения, хранятся отдельно от программы. Поэтому специальный редактор ресурсов позволяет просматривать и модифицировать их без изменения программного кода.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
В Java технологии применяется концепция использования ресурсов, позволяющая размещать файлы данных, аудио файлы и изображения в JAR-архивах. Метод <code>getResource()</code> класса <code>Class</code> находит файл, открывает его и возвращает <code>URL</code>, указывающий на ресурс. При размещении файлов в JAR-архивах задачу поиска файлов решает загрузчик классов. Данный механизм обеспечивает поддержку региональных стандартов.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_определение_файла_ресурсов_resourcebundle">Определение файла ресурсов <code>ResourceBundle</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Для локализации приложений создаются так называемые <strong>пакеты ресурсов</strong> (<strong>resource bundle</strong>). Каждый пакет представляет собой файл свойств или класс, который описывает элементы, специфические для конкретного регионального стандарта (например, сообщения, надписи и т.д.). В каждый пакет помещаются ресурсы для всех региональных стандартов, поддержка которых предполагается в программе.</p>
</div>
<div class="paragraph">
<p>Для именования пакетов ресурсов используются специальные соглашения. Например, ресурсы, специфические для Германии, помещаются в файл с именем <code>имяПакета_de_DE</code>, а ресурсы, общие для стран, в которых используется немецкий язык, размещаются в классе <code>имяПакета_de</code>. Общие правила таковы: ресурсы для конкретной страны именуются по принципу:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>имяПакета_язык_СТРАНА</pre>
</div>
</div>
<div class="paragraph">
<p>Имя файла ресурсов для конкретного языка формируется так:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>имяПакета_язык</pre>
</div>
</div>
<div class="paragraph">
<p>Ресурсы, применяемые по умолчанию, помещаются в файл, имя которого не содержит суффикса. Для загрузки пакета ресурсов используется метод <code>getBundle()</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ResourceBundle bundle;
bundle = ResourceBundle.getBundle("ProgramResources", currentLocale)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Метод <code>getBundle()</code> пытается загрузить информацию из пакета ресурсов, которая соответствует языку, расположению и варианту текущего регионального стандарта. Если попытка загрузки окончилась неудачей, последовательно отбрасывается вариант, страна и язык. Затем осуществляется поиск ресурса, соответствующего текущему региональному стандарту, и происходит обращение к пакету ресурсов по умолчанию. Если и эта попытка завершается неудачей, генерируется исключение <code>MissingResourceException</code>. Таким образом, метод <code>getBundle()</code> пытается загрузить первый доступный ресурс из перечисленных пакетов:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>имяПакета_трс_язык_трс_СТРАНА_трс_вариант
имяПакета_трс_язык_трс_СТРАНА
имяПакета_трс_язык

имяПакета_рсу_язык_рсу_СТРАНА_рсу_вариант
имяПакета_рсу_язык_рсу_СТРАНА
имяПакета_рсу_язык

имяПакета</pre>
</div>
</div>
<div class="paragraph">
<p>Здесь используются сокращения:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>трс</code> - текущий региональный стандарт;</p>
</li>
<li>
<p><code>рсу</code> - региональный стандарт по умолчанию.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Даже, если метод <code>getBundle()</code> находит пакет, например <code>имяПакета_de_DE</code>, он продолжает искать пакеты <code>имяПакета_de</code>, <code>имяПакета</code>. Если такие пакеты существуют, то они становятся родительскими по отношению к пакету <code>имяПакета_de_DE</code> в иерархии ресурсов. Родительские классы нужны в тех случаях, когда необходимый ресурс не найден в пакете <code>имяПакета_de_DE</code>, и выполняется поиск ресурса в пакетах <code>имяПакета_de</code>, <code>имяПакета</code>. Другими словами, поиск ресурса проверяется последовательно во всех пакетах до первого вхождения.</p>
</div>
<div class="paragraph">
<p>Очевидно, что это очень полезный механизм, однако для его реализации вручную программисту пришлось бы выполнить большой объем рутинной работы. Средства поддержки пакетов ресурсов Java автоматически находят ресурсы, наилучшим образом соответствующие конкретному региональному стандарту. Для включения в существующую программу новых локальных настроек необходимо всего лишь дополнить соответствующие пакеты ресурсов.</p>
</div>
<div class="paragraph">
<p>Создавая приложения, необязательно помещать все ресурсы в один пакет. Можно создать один пакет для надписей на кнопках, другой - для сообщений об ошибках и т.д.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_файлы_свойств_properties">Файлы свойств <code>properties</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Для интернационализации строк необходимо все строки поместить в файл свойств, например <code>MyPackage.properties</code>. Файл свойств - это обычный текстовый файл, каждая строка которого содержит ключ и значение. Пример содержимого такого файла приведен ниже:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">colorName=black
PageSize=210x297
buttonName=Insert</code></pre>
</div>
</div>
<div class="paragraph">
<p>Имя файла выбирается по принципу, описанному в предыдущем разделе.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MyPackage.properties
MyPackage_en.properties
MyPackage_de_DE.properties</pre>
</div>
</div>
<div class="paragraph">
<p>Для загрузки пакета ресурсов из файла свойств применяется приведенное ниже выражение:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ResourceBundle bundle;
bundle = ResourceBundle.getBundle("MyPackage", locale);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Поиск конкретной строки выполняется следующим образом :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">String label = bundle.getString ("PageSize");</code></pre>
</div>
</div>
<div class="paragraph">
<p>Файлы свойств могут содержать только <strong>ASCII</strong>-символы. Для размещения в них сомволов в кодировке Unicode следует использовать формат <code>\uxxxx</code>. Например, строка <code>colorName=Зеленый</code> для кириллицы будет иметь вид</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">colorName=\u0417\u0435\u043B\u0435\u043D\u044B\u0439</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_классы_реализующие_пакеты_ресурсов">Классы, реализующие пакеты ресурсов</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Для поддержки ресурсов, не являющихся строками, необходимо определить классы, являющиеся подклассами класса <code>ResourceBundle</code>. Выбор имен таких классов осуществляется в соответствии с соглашениями об именовании, например:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MyProgramResource.java
MyProgramResource_en.java
MyProgramResource_de_DE.java</pre>
</div>
</div>
<div class="paragraph">
<p>Для загрузки класса используется тот же метод <code>getBundle()</code>, что и для загрузки свойств.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ResourceBoundle boundle = ResourceBoundle.getBundle ("MyProgrammResource", locale);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Если два пакета ресурсов, один из которых реализован в виде класса, а другой в виде файла свойств имеют одинаковые имена, то при загрузке предпочтение отдается классу. В каждом классе, реализующем пакет ресурсов, поддерживается таблица поиска. Для получения значения используется строка-ключ.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Color background;
double[] paperSize;
background = (Color) bundle.getObject("backgroundColor");
paperSize = (double[])bundle.getObject("defaultPaperSize");</code></pre>
</div>
</div>
<div class="paragraph">
<p>Самый простой способ реализации пакета ресурсов — создание подкласса <code>ListResourceBundle</code>. Класс <code>ListResourceBundle</code> позволяет помещать все ресурсы в массив объектов и выполнять поиск. Подкласс класса <code>ListResourceBundle</code> должен иметь следующую структуру:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class имяПакета_язык_СТРАНА extends ListResourceBundle {
    private static final Objects[][] contents = {
        {ключ1, значение1},
        {ключ2, значение2},
        // ...
    };

    public Object[][] getContents() {
        return contents;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Пример классов, созданных на базе <code>ListResourceBundle</code>, приведен ниже.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class ProgramResources_de extends ListResourceBundle {
    private static final Objects[][] contents = {
        {"backgroundColor", Color.black},
        {defaultPaperSize, new double[] {210, 297}}
    };

    public Object[][] getContents() {
        return contents;
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class ProgramResources_en_US extends ListResourceBundle {
    private static final Objects[][] contents = {
        {"backgroundColor", Color.blue},
        {defaultPaperSize, new double[] {216, 279}}
    };

    public Object[][] getContents() {
        return contents;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Класс пакета ресурсов можно также создать как подкласс класса <code>ResourceBundle</code>. В этом случае необходимо реализовывать два метода, предназначенные для получения объекта <code>Enumeration</code>, содержащего ключи, и для извлечения значения, соответствующего конкретному ключу.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Enumeration &lt;String&gt; getKeys ();
Object handleGetObject (String key);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Метод <code>getObject()</code> класса <code>ResourceBundle</code> вызывает определяемый разработчиком метод <code>handleGetObject ()</code>.</p>
</div>
<div class="sect2">
<h3 id="_методы_пакета_java_util_resourcebundle">Методы пакета <code>java.util.ResourceBundle</code></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>static ResourceBundle getBundle (String baseName, Locale loc)</code></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Загружает класс пакета ресурсов с заданным именем, а также его родительские классы для указанного регионального стандарта. Если классы пакетов расположены в Java-пакете, то должно быть указано полное имя, например, <code>intl.ProgramResources</code>. Классы пакетов ресурсов должны быть объявлены открытыми (<code>public</code>), чтобы метод <code>getBundle()</code> мог обращаться к ним.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>static ResourceBundle getBundle (String baseName)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Object getObject (String name)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Извлекает объект из пакета ресурсов или его родительских пакетов.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String getString (String name)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Извлекает объект из пакета ресурсов или его родительских пакетов и приводит к типу <code>String</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String[] getStringArray (String name)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Извлекает объект из пакета ресурсов или его родительских пакетов и представляет в виде массива строк.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Enumeration &lt;String&gt; getKeys()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Возвращает объект <code>Enumeration</code>, содержащий ключи текущего пакета ресурсов. При этом в объект <code>Enumeration</code> также помещаются ключи из родительских пакетов ресурсов.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Object handleGetObject(String key)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">При реализации собственного механизма поиска ресурсов, данный метод следует переопределить так, чтобы он возвращал значение, соответствующее указанному ключу.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_форматирование_сообщений_messageformat">Форматирование сообщений <code>MessageFormat</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>В библиотеке Java содержится класс MessageFormat, который форматирует текст, содержащий фрагменты, представленные посредством переменных. Например:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">String template = "On {2}, a {0} destroyed {1} houses and caused {3} of damage.";</code></pre>
</div>
</div>
<div class="paragraph">
<p>В данном примере номера в фигурных скобках используются как "заполнители" для реальных имен и значений. Статический метод MessageFormat.format () позволяет подставить значения переменных. В JDK 5.0 поддерживаются методы с переменным числом параметров: таким образом, подстановка может быть выполнена так, как показано ниже.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">String message;
message = MessageFormat.format(template, "hurricane", 99,
                new GregorianCalendar(1999, 0, 1).getTime(), 10.0E7);</code></pre>
</div>
</div>
<div class="paragraph">
<p>В более старых версиях <strong>JDK</strong> необходимо было помещать значения в массив <code>Object[]</code>. В рассматриваемом примере переменная <code>{0}</code> замещается значением <code>hurricane</code>, переменная <code>{1}</code> заменяется значением <code>99</code> и т.д.</p>
</div>
<div class="paragraph">
<p>Статический метод <code>format()</code> форматирует значения с учетом текущего регионального стандарта. Для того, чтобы использовать класс <code>MessageFormat</code> с произвольными региональными настройками, необходимо поступить следующим образом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">MessageFormat mf = new MessageFormat(pattern locale);
String msg = mf.format(new Object[] { значения });</code></pre>
</div>
</div>
<div class="paragraph">
<p>Здесь вызывается метод <code>format()</code> суперкласса <code>Format</code>. К сожалению, класс <code>MessageFormat</code> не предоставляет аналогичный метод, обеспечивающий работу с переменным числом параметров. В результате обработки строки, рассматриваемой в качестве примера, будет получено следующее сообщение:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>On 1/1/99 12:00 АМ, a hurricane destroyed 99 houses and caused 100,000,000 of damage.</pre>
</div>
</div>
<div class="paragraph">
<p>Результат можно преобразовать, если сумму ущерба представить в денежных единицах, а дату с учетом формата:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">String template = "On {2,date,long}, a {0} destroyed {1} "
                    + "houses and caused {3,number,currency} of damage.";</code></pre>
</div>
</div>
<div class="paragraph">
<p>В результате будет получено сообщение:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>On January 1, 1999, a hurricane destroyed 99 houses and caused $100,000,000 of damage.</pre>
</div>
</div>
<div class="paragraph">
<p>В составе переменной допускается задавать тип и стиль, которые разделяются запятыми. Допустимыми значениями являются следующие типы: <code>number</code>, <code>time</code>, <code>date</code>, <code>choice</code>. Если указан тип <code>number</code>, то возможны следующие стили: <code>integer</code>, <code>currency</code>, <code>percent</code>. Кроме того, в качестве стиля может быть указан шаблон числового формата, например <code>$,##0</code>. Дополнительную информацию по данному вопросу можно найти в описании класса <code>DecimalFormat</code>.</p>
</div>
<div class="paragraph">
<p>Для типа <code>time</code> и <code>date</code> может быть указан один из следующих стилей: <code>short</code>, <code>medium</code>, <code>long</code>, <code>full</code>.</p>
</div>
<div class="paragraph">
<p>Аналогично числам, в качестве стиля может быть использован шаблон даты. Допустимые форматы подробно рассматриваются в описании класса <code>SimpleDateFormat</code>.</p>
</div>
<div class="paragraph">
<p>Форматы выбора (тип <code>choice</code>) имеют более сложную структуру и подробно рассматриваются далее.</p>
</div>
<div class="sect2">
<h3 id="_методы_класса_messageformat">Методы класса <code>MessageFormat</code></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Наименование метода</th>
<th class="tableblock halign-left valign-top">Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MessageFormat(String pattern)</code></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Создает объект форматирования сообщения согласно указанному шаблону и региональному стандарту.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MessageFormat(String pattern, Locale locale)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>void applyPattern(String pattern)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Задает шаблон для объекта форматирования.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>void setLocale(Locale locale)</code></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Устанавливает или возвращает региональный стандарт для переменных в составе сообщения. Он используется только для последующих шаблонов, заданных с помощью метода <code>applyPattern()</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Locale getLocale()</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>static String format(String pattern, Object&#8230;&#8203; args)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Форматирует строку согласно шаблону <code>pattern</code>, заменяя в нем переменные <code>{i}</code> значениями объектов из массива <code>args[i]</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>StringBuffer format(Object args, StringBuffer result, FieldPosition pos)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Форматирует шаблон данного объекта <code>MessageFormat</code>. Параметр <code>args</code> должен представлять собой массив объектов. Форматируемая строка добавляется к значению result, которое затем возвращается. Если параметр pos эквивалентен <code>new FieldPosition(MessageFormat.Field.ARGUMENT)</code>, его свойства <code>beginIndex</code> и <code>endIndex</code> устанавливаются в соответствии с расположением текста, который замещает переменную <code>{1}</code>. Если информация о расположении Вас не интересует, в качестве этого параметра следует задать значение <code>null</code>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Класс <code>java.text.Format</code> имеет метод <code>String format(Object object)</code>, который форматирует заданный объект в соответствии с правилами, определенными посредством текущего объекта форматирования. В процессе работы данный метод обращается к методу <code>format(object, new StringBuffer(), new FieldPosition(1)).toString()</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_формат_выбора_choice">Формат выбора <code>choice</code></h3>
<div class="paragraph">
<p>Использование формата выбора предполагает определение последовательности пар значений, каждая из которых содержит нижнюю границу и строку подстановки. Нижняя граница и строка подстановки разделяются символами <code>#</code>, а для разделения пар значений используется символ <code>|</code>. Ниже приведен пример переменной с указанием формата выбора.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{1, choice, 0#no houses | 1#one house | 21 houses}</pre>
</div>
</div>
<div class="paragraph">
<p>Результаты форматирования, в зависимости от значения <code>{1}</code>, представлены в следующей таблице.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">{1}</th>
<th class="tableblock halign-left valign-top">Результат</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>no houses</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>one house</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3 houses</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>no houses</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Может возникнуть вопрос, а зачем в форматируемой строке дважды указывается переменная <code>{1}</code>? Когда для этой переменной применяется формат выбора и значение оказывается большим или равным <code>2</code>, возвращается выражение <code>{1} houses</code>. Оно форматируется снова и включается в результирующую строку.</p>
</div>
<div class="paragraph">
<p>Данный пример показывает, что разработчики формата выбора приняли не самое лучшее решение. Если есть два варианта форматируемых строк, то для их разделения достаточно двух граничных значений, но согласно формату нужно задать три таких значения. Наименьшее из них никогда не используется. Синтаксис мог бы быть более понятным, если бы границы указывались между вариантами значений, например следующим образом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>no houses | 1|one house | 2{1} houses  // к сожалению данный формат не поддерживается</pre>
</div>
</div>
<div class="paragraph">
<p>С помощью символа <code>&lt;</code> можно указать, что предполагаемый вариант должен быть выбран, если нижняя граница строго меньше значения.</p>
</div>
<div class="paragraph">
<p>Завершая пример о последствиях стихийного бедствия, необходимо поместить строку с условиями выбора внутри исходной строки сообщения. В результате получится следующая конструкция:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">String pattern = "On {2, date, long}, {0} destroyed "
                    + "{1, choice, 0#no houses | 1#one house | 21 houses} "
                    + " and caused {3, number, currency} of damage.";</code></pre>
</div>
</div>
<div class="paragraph">
<p>В немецком варианте она будет выглядеть иначе.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">String pattern = "{0} zerstörte am {2, date, long} "
                    + "{1, choice, 0#kein Haus | 1#ein Haus | 21 Häuser} "
                    + " und richtete einen Shaden von {3, number, currency} an.";</code></pre>
</div>
</div>
<div class="paragraph">
<p>Примечательно, что последовательность слов в английском и немецком вариантах разная, но методу <code>format()</code> передается тот же самый массив объектов. Под требуемый порядок слов подстраивается только последовательность появления переменных.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-03-24 02:53:34 UTC
</div>
</div>
</body>
</html>